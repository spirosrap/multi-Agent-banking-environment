sources:
  deposit:
    kind: mysql
    host: ${MYSQL_HOST}
    port: ${MYSQL_PORT:3306}
    database: bank
    user: ${MYSQL_USER}
    password: ${MYSQL_PASSWORD}
tools:
  list_accounts_by_customer:
    kind: mysql-sql
    source: deposit
    description: |
      List deposit accounts for a customer ID, including account ID, type, and balance.
      Example:
      {
          "customer_id": 1
      }
    statement: |
      SELECT id, account_type, balance
      FROM accounts
      WHERE customer_id = ?
      ORDER BY id
    parameters:
      - name: customer_id
        type: integer
        description: Customer ID to look up.

  get_account_balance:
    kind: mysql-sql
    source: deposit
    description: |
      Get the current balance for a specific account ID.
      Example:
      {
          "account_id": 1
      }
    statement: |
      SELECT id, account_type, balance
      FROM accounts
      WHERE id = ?
    parameters:
      - name: account_id
        type: integer
        description: Account ID to look up.

  list_transactions_by_account:
    kind: mysql-sql
    source: deposit
    description: |
      List recent transactions for a specific account ID.
      Example:
      {
          "account_id": 1
      }
    statement: |
      SELECT transaction_date, amount, description
      FROM transactions
      WHERE account_id = ?
      ORDER BY transaction_date DESC
      LIMIT 50
    parameters:
      - name: account_id
        type: integer
        description: Account ID to look up.

  check_minimum_balance:
    kind: mysql-sql
    source: deposit
    description: |
      Check whether an account meets a minimum balance threshold.
      Example:
      {
          "account_id": 1,
          "minimum_balance": 1000.00
      }
    statement: |
      SELECT id, account_type, balance, (balance >= ?) AS meets_minimum
      FROM accounts
      WHERE id = ?
    parameters:
      - name: minimum_balance
        type: float
        description: Minimum balance to compare against.
      - name: account_id
        type: integer
        description: Account ID to look up.
