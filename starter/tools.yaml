sources:
  deposit:
    kind: mysql
    host: ${MYSQL_HOST}
    port: ${MYSQL_PORT:3306}
    database: bank
    user: ${MYSQL_USER}
    password: ${MYSQL_PASSWORD}
  loan:
    kind: mysql
    host: ${MYSQL_HOST}
    port: ${MYSQL_PORT:3306}
    database: bank
    user: ${MYSQL_USER}
    password: ${MYSQL_PASSWORD}

tools:
  list_accounts_by_customer:
    kind: mysql-sql
    source: deposit
    description: |
      List deposit accounts for a customer ID, including account ID, type, and balance.
      Example:
      {
          "customer_id": 1
      }
    statement: |
      SELECT id, account_type, balance
      FROM accounts
      WHERE customer_id = ?
      ORDER BY id
    parameters:
      - name: customer_id
        type: integer
        description: Customer ID to look up.

  get_account_balance:
    kind: mysql-sql
    source: deposit
    description: |
      Get the current balance for a specific account ID.
      Example:
      {
          "account_id": 1
      }
    statement: |
      SELECT id, account_type, balance
      FROM accounts
      WHERE id = ?
    parameters:
      - name: account_id
        type: integer
        description: Account ID to look up.

  list_transactions_by_account:
    kind: mysql-sql
    source: deposit
    description: |
      List recent transactions for a specific account ID.
      Example:
      {
          "account_id": 1
      }
    statement: |
      SELECT transaction_date, amount, description
      FROM transactions
      WHERE account_id = ?
      ORDER BY transaction_date DESC
      LIMIT 50
    parameters:
      - name: account_id
        type: integer
        description: Account ID to look up.

  check_minimum_balance:
    kind: mysql-sql
    source: deposit
    description: |
      Check whether an account meets a minimum balance threshold.
      Example:
      {
          "account_id": 1,
          "minimum_balance": 1000.00
      }
    statement: |
      SELECT id, account_type, balance, (balance >= ?) AS meets_minimum
      FROM accounts
      WHERE id = ?
    parameters:
      - name: minimum_balance
        type: number
        description: Minimum balance to compare against.
      - name: account_id
        type: integer
        description: Account ID to look up.

  get_outstanding_balances_by_customer:
    kind: mysql-sql
    source: loan
    description: |
      Get outstanding loan balances for a customer ID.
      Example:
      {
          "customer_id": 1
      }
    statement: |
      SELECT id, loan_type, outstanding_balance
      FROM loans
      WHERE customer_id = ?
      ORDER BY id
    parameters:
      - name: customer_id
        type: integer
        description: Customer ID to look up.

  get_loan_terms_by_id:
    kind: mysql-sql
    source: loan
    description: |
      Get loan terms and details for a specific loan ID.
      Example:
      {
          "loan_id": 1
      }
    statement: |
      SELECT id, loan_type, origination_date, amount, terms, monthly_payment
      FROM loans
      WHERE id = ?
    parameters:
      - name: loan_id
        type: integer
        description: Loan ID to look up.

  get_next_payment_date_by_id:
    kind: mysql-sql
    source: loan
    description: |
      Get the next payment date for a specific loan ID.
      Example:
      {
          "loan_id": 1
      }
    statement: |
      SELECT id, next_payment_date
      FROM loans
      WHERE id = ?
    parameters:
      - name: loan_id
        type: integer
        description: Loan ID to look up.
